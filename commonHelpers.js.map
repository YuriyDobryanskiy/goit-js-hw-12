{"version":3,"file":"commonHelpers.js","sources":["../src/img/octagon.svg","../src/js/components/modal.js","../src/js/fetch.js","../src/js/components/scroll.js","../src/js/components/img-block-height.js","../src/js/template.js","../src/js/components/lightbox.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__de411352__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport imgUrl from '../../img/octagon.svg';\n\nexport function showError(message) {\n  iziToast.error({\n    theme: 'dark',\n    message: message,\n    timeout: 5000,\n    backgroundColor: '#EF4040',\n    iconUrl: imgUrl,\n    messageColor: '#FAFAFB',\n    position: 'topRight',\n  });\n}\n","import axios from 'axios';\nimport { showError } from './components/modal.js';\n\nconst perPage = 40;\nconst API_KEY = '41936160-9a65f6e7e8f481bcadff71523';\nconst BASE_URL = 'https://pixabay.com/api';\n\nconst testGallery = async (query, page) => {\n  const requestUrl = `${BASE_URL}/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(requestUrl);\n    if (!response.data.hits.length) {\n      showError(\n        'Sorry, there are no images matching your search query. Please, try again!'\n      );\n      loadMoreBtn.style.display = 'none';\n      return null;\n    }\n    //send image\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    showError('An error occurred while fetching images. Please try again.');\n  }\n};\n\nexport { perPage, testGallery };\n","export function smoothScrollToNextGroup(cardHeight) {\n  const yOffset = cardHeight * 2;\n  window.scrollBy({\n    top: yOffset,\n    behavior: 'smooth',\n  });\n}\n","export function getCardHeight() {\n  const card = document.querySelector('.gallery-item');\n  const cardRect = card.getBoundingClientRect();\n  return cardRect.height;\n}\n","export function createMarkup({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-item\"><a class=\"gallery-link\" href=\"${largeImageURL}\"><img class=\"gallery-image\" src=\"${webformatURL}\" data-source=\"${largeImageURL}\" loading=\"lazy\" alt=\"${tags}\"></a><div class='gallery-history'><div class='block1'><span>Likes</span>${likes}</div><div class='block2'><span>Views</span>${views}</div><div class='block3'><span>Comments</span>${comments}</div><div class='block4'><span>Downloads</span>${downloads}</div></li>`;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  showCounter: false,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n","let currentPage = null;\nlet searchTerm = null;\n\n//import fetch\nimport { perPage, testGallery } from './js/fetch.js';\n//smooth scroll\nimport { smoothScrollToNextGroup } from './js/components/scroll.js';\n//card height\nimport { getCardHeight } from './js/components/img-block-height.js';\n//markup\nimport { createMarkup } from './js/template.js';\n//function\nimport { showError } from './js/components/modal.js';\n//popup with image\nimport { lightbox } from './js/components/lightbox.js';\n\n//Form\nconst form = document.querySelector('#imageSearchForm');\nconst searchInput = document.querySelector('#searchInput');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('#gallery');\nconst loadMoreBtn = document.querySelector('#loadMoreBtn');\n\nform.addEventListener('submit', async function (e) {\n  e.preventDefault();\n  searchTerm = searchInput.value.trim();\n\n  if (searchTerm === '') {\n    showError('Please enter a search term.');\n    return;\n  }\n\n  loader.style.display = 'block';\n  gallery.innerHTML = '';\n  currentPage = 1;\n\n  const data = await testGallery(searchTerm, currentPage);\n\n  if (data) {\n    let markup = '';\n    data.hits.forEach(element => {\n      markup += createMarkup(element);\n    });\n    gallery.innerHTML = markup;\n    showLoadMoreButton(data.totalHits);\n    lightbox.refresh();\n  }\n  loader.style.display = 'none';\n  searchInput.value = '';\n});\n//Form\n\n//loadMore image\nloadMoreBtn.addEventListener('click', async function (e) {\n  e.preventDefault();\n\n  currentPage += 1;\n  loader.style.display = 'block';\n\n  const data = await testGallery(searchTerm, currentPage);\n  if (data) {\n    let markup = '';\n    data.hits.forEach(element => {\n      markup += createMarkup(element);\n    });\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n    showLoadMoreButton(data.totalHits);\n    lightbox.refresh();\n  }\n  loader.style.display = 'none';\n  smoothScrollToNextGroup(getCardHeight());\n});\n\n//LoadMoreButton\nfunction showLoadMoreButton(totalHits) {\n  const imagesDisplayed = currentPage * perPage;\n  loadMoreBtn.style.display = imagesDisplayed < totalHits ? 'block' : 'none';\n\n  if (imagesDisplayed >= totalHits) {\n    showError(\"We're sorry, but you've reached the end of search results.\");\n  }\n}\n"],"names":["imgUrl","showError","message","iziToast","perPage","API_KEY","BASE_URL","testGallery","query","page","requestUrl","response","axios","error","smoothScrollToNextGroup","cardHeight","yOffset","getCardHeight","createMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","currentPage","searchTerm","form","searchInput","loader","gallery","loadMoreBtn","e","data","markup","element","showLoadMoreButton","totalHits","imagesDisplayed"],"mappings":"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"}